<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St. Mary Church - Welcome Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Merriweather', serif;
        }
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://raw.githubusercontent.com/reddyrohan2003/St.-Mary-s-Church/62317c1789a433024b85b8ec226003f37bf83ed7/IMG_7785.jpg') no-repeat center center/cover;
            animation: fadeIn 2s ease-in-out;
        }
        .animated-card {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animated-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .nav-link {
            transition: color 0.3s ease, border-bottom 0.3s ease;
        }
        .nav-link:hover {
            color: #f59e0b; /* A warm gold on hover */
            border-bottom: 2px solid #f59e0b;
        }
        .cta-button {
             transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            background-color: #f59e0b;
        }
        /* Custom scrollbar for pastor section */
        .pastor-scroll::-webkit-scrollbar {
            height: 8px;
        }
        .pastor-scroll::-webkit-scrollbar-track {
            background: #e2e8f0; /* gray-200 */
            border-radius: 10px;
        }
        .pastor-scroll::-webkit-scrollbar-thumb {
            background: #a5b4fc; /* indigo-300 */
            border-radius: 10px;
        }
        .pastor-scroll::-webkit-scrollbar-thumb:hover {
            background: #818cf8; /* indigo-400 */
        }
        .gemini-button {
            transition: all 0.3s ease;
        }
        .gemini-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        /* Loading Spinner */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #6366f1; /* Indigo */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900">St. Mary Church</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#about" class="text-gray-600 nav-link pb-1">About Us</a>
                <a href="#events" class="text-gray-600 nav-link pb-1">Events</a>
                <a href="#sermon" class="text-gray-600 nav-link pb-1">Sermon</a>
                <a href="#past-priests" class="text-gray-600 nav-link pb-1">Past Priests</a>
                <a href="#contact" class="text-gray-600 nav-link pb-1">Contact</a>
            </div>
            <a href="#donate" class="hidden md:block bg-indigo-600 text-white py-2 px-4 rounded-lg shadow-md cta-button">Donate</a>
            <button id="mobile-menu-button" class="md:hidden text-gray-800 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4">
            <a href="#about" class="block py-2 text-gray-600">About Us</a>
            <a href="#events" class="block py-2 text-gray-600">Events</a>
            <a href="#sermon" class="block py-2 text-gray-600">Sermon</a>
            <a href="#past-priests" class="block py-2 text-gray-600">Past Priests</a>
            <a href="#contact" class="block py-2 text-gray-600">Contact</a>
            <a href="#donate" class="block mt-2 bg-indigo-600 text-white text-center py-2 px-4 rounded-lg shadow-md">Donate</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero-section h-[80vh] flex items-center justify-center text-white text-center">
            <div class="bg-black bg-opacity-40 p-8 rounded-lg">
                <h1 class="text-5xl md:text-7xl font-bold mb-4 animate-fadeIn">Welcome to Our Parish</h1>
                <p class="text-lg md:text-xl mb-6 max-w-2xl mx-auto animate-fadeIn" style="animation-delay: 0.5s;">A place of faith, community, and service. Join us for worship.</p>
                <div class="animate-fadeIn" style="animation-delay: 1s;">
                    <p class="text-xl font-semibold mb-2">Sunday Mass: 9:00 AM & 11:00 AM</p>
                    <a href="#events" class="bg-amber-500 text-gray-900 py-3 px-8 rounded-full text-lg font-bold shadow-xl cta-button">View Upcoming Events</a>
                </div>
            </div>
        </section>

        <!-- Welcome Message Section -->
        <section id="about" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl font-bold mb-4 animated-card">A Message from Our Parish Priest</h2>
                <div class="flex justify-center mb-6 animated-card" style="transition-delay: 0.2s;">
                    <img src="https://github.com/reddyrohan2003/St.-Mary-s-Church/blob/e60dcc00023de2cfcfe741dc32a874ce45f89e57/IMG_7296.jpeg?raw=true" alt="Parish Priest" class="rounded-full shadow-lg">
                </div>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 leading-relaxed animated-card" style="transition-delay: 0.4s;">
                    "It is with great joy that I welcome you to our parish website. St. Mary's Church is more than just a building; it is a vibrant family of faith. We are a community that prays together, supports one another, and reaches out to those in need. Whether you are a longtime parishioner or a first-time visitor, know that you are always welcome here. We invite you to join us as we grow in faith and love."
                </p>
            </div>
        </section>

        <!-- Community Stats Section -->
        <section class="py-20 bg-gray-50">
            <div class="container mx-auto px-6 text-center">
                <div class="animated-card max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold mb-8">Our Community By The Numbers</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Stat 1: Families -->
                        <div class="p-8 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-bold text-indigo-600">
                                <span class="counter" data-target="250">1</span>+
                            </p>
                            <p class="text-xl text-gray-600 mt-2">Families in Parish</p>
                        </div>
                        <!-- Stat 2: Ministries -->
                        <div class="p-8 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-bold text-indigo-600">
                                 <span class="counter" data-target="800">1</span>
                            </p>
                            <p class="text-xl text-gray-600 mt-2">Total People</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upcoming Events Section -->
        <section id="events" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 animated-card">Upcoming Events</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Event Card 1 -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden animated-card" style="transition-delay: 0.2s;">
                        <img src="https://placehold.co/600x400/a5b4fc/ffffff?text=Community+Picnic" alt="Community Picnic" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2">Annual Community Picnic</h3>
                            <p class="text-indigo-600 font-semibold mb-3">September 14, 2025 | 12:00 PM</p>
                            <p class="text-gray-600">Join us for a day of fun, food, and fellowship at the church grounds. All are welcome!</p>
                        </div>
                    </div>
                    <!-- Event Card 2 -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden animated-card" style="transition-delay: 0.4s;">
                        <img src="https://placehold.co/600x400/fca5a5/ffffff?text=Charity+Drive" alt="Charity Drive" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2">Winter Clothing Drive</h3>
                            <p class="text-indigo-600 font-semibold mb-3">Starts September 20, 2025</p>
                            <p class="text-gray-600">We are collecting warm clothing for those in need. Donations can be dropped off at the parish hall.</p>
                        </div>
                    </div>
                    <!-- Event Card 3 -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden animated-card" style="transition-delay: 0.6s;">
                        <img src="https://placehold.co/600x400/86efac/ffffff?text=Bible+Study" alt="Bible Study" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2">New Bible Study Group</h3>
                            <p class="text-indigo-600 font-semibold mb-3">Every Wednesday | 7:00 PM</p>
                            <p class="text-gray-600">Explore the Gospel of John with fellow parishioners. A great way to deepen your faith.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sermon Section with Gemini -->
        <section id="sermon" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 animated-card">This Week's Sermon</h2>
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg animated-card">
                    <h3 class="text-2xl font-bold mb-4">The Power of Forgiveness</h3>
                    <div id="sermon-text" class="text-gray-700 space-y-4">
                        <p>My dear brothers and sisters, today I want to speak about a cornerstone of our faith, a concept that is both profoundly simple and extraordinarily difficult: forgiveness. In the Gospel of Matthew, Peter asks Jesus, "Lord, how often shall my brother sin against me, and I forgive him? As many as seven times?" Jesus said to him, "I do not say to you seven times, but seventy-seven times."</p>
                        <p>This is not a mathematical formula. It is a spiritual directive. It means forgiveness is not a transaction we complete, but a state of being we must inhabit. It is a continuous, conscious choice to let go of resentment and the desire for retribution. Forgiveness is a gift you give yourself. It frees you from the prison of anger and allows the grace of God to heal your heart. Holding onto a grudge is like drinking poison and expecting the other person to die. It harms us, spiritually and emotionally, far more than it harms the one who wronged us.</p>
                        <p>To forgive is not to condone the wrong that was done. It is not to say that what happened was okay. It is to say, "I will no longer allow this wound to define me. I release this burden to God." It is an act of profound faith, trusting that God's justice is perfect and that His love can mend all brokenness. Let us pray for the strength to forgive as we have been forgiven, to love as we have been loved, and to walk in the light of Christ's peace.</p>
                    </div>
                    <div class="text-center mt-8">
                        <button id="summarize-button" class="bg-indigo-600 text-white py-3 px-6 rounded-lg shadow-md font-semibold gemini-button">✨ Generate Summary & Takeaways</button>
                    </div>
                    <div id="sermon-summary-container" class="mt-6 border-t pt-6" style="display: none;">
                        <div id="sermon-loader" class="loader" style="display: none;"></div>
                        <div id="sermon-summary-content" class="text-gray-700 space-y-3"></div>
                    </div>
                </div>
            </div>
        </section>

         <!-- Past Priests Section -->
        <section id="past-priests" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 animated-card">Our Beloved Pastors</h2>
                <div class="flex overflow-x-auto space-x-8 pb-4 pastor-scroll">
                    <!-- Priest Card 1 -->
                    <div class="text-center animated-card flex-shrink-0 w-60" style="transition-delay: 0.2s;">
                        <img src="https://placehold.co/400x400/e2e8f0/333333?text=Fr.+James+Smith" alt="Fr. James Smith" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                        <h3 class="text-xl font-bold">Fr. James Smith</h3>
                        <p class="text-gray-600">2015 - 2022</p>
                    </div>
                    <!-- Priest Card 2 -->
                    <div class="text-center animated-card flex-shrink-0 w-60" style="transition-delay: 0.4s;">
                        <img src="https://placehold.co/400x400/e2e8f0/333333?text=Fr.+Michael+Chen" alt="Fr. Michael Chen" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                        <h3 class="text-xl font-bold">Fr. Michael Chen</h3>
                        <p class="text-gray-600">2008 - 2015</p>
                    </div>
                    <!-- Priest Card 3 -->
                    <div class="text-center animated-card flex-shrink-0 w-60" style="transition-delay: 0.6s;">
                        <img src="https://placehold.co/400x400/e2e8f0/333333?text=Fr.+David+Garcia" alt="Fr. David Garcia" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                        <h3 class="text-xl font-bold">Fr. David Garcia</h3>
                        <p class="text-gray-600">2000 - 2008</p>
                    </div>
                    <!-- Priest Card 4 -->
                    <div class="text-center animated-card flex-shrink-0 w-60" style="transition-delay: 0.8s;">
                        <img src="https://placehold.co/400x400/e2e8f0/333333?text=Fr.+Robert+Jones" alt="Fr. Robert Jones" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                        <h3 class="text-xl font-bold">Fr. Robert Jones</h3>
                        <p class="text-gray-600">1992 - 2000</p>
                    </div>
                    <!-- Priest Card 5 (Example) -->
                    <div class="text-center animated-card flex-shrink-0 w-60" style="transition-delay: 1.0s;">
                        <img src="https://raw.githubusercontent.com/reddyrohan2003/St.-Mary-s-Church/e60dcc00023de2cfcfe741dc32a874ce45f89e57/IMG_7296.jpeg" class="w-48 h-48 mx-auto rounded-full shadow-lg mb-4">
                        <h3 class="text-xl font-bold">Fr. Inna Reddy Yeruva</h3>
                        <p class="text-gray-600">2019 - </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Prayer Assistant Section -->
        <section id="prayer-assistant" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6 text-center">
                <div class="max-w-2xl mx-auto animated-card">
                    <h2 class="text-4xl font-bold mb-4">Find a Moment of Peace</h2>
                    <p class="text-lg text-gray-600 mb-8">Feeling a certain way? Need a little guidance? Share a word or a phrase below, and we'll offer a short prayer or reflection for you.</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <input type="text" id="prayer-topic" class="w-full sm:w-80 px-4 py-3 rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="e.g., 'Gratitude', 'Feeling worried'">
                        <button id="generate-prayer-button" class="bg-amber-500 text-gray-900 py-3 px-6 rounded-lg shadow-md font-semibold gemini-button">✨ Generate a Prayer</button>
                    </div>
                    <div id="prayer-result-container" class="mt-8 bg-white p-6 rounded-lg shadow-lg text-left" style="display: none;">
                        <div id="prayer-loader" class="loader" style="display: none;"></div>
                        <div id="prayer-content" class="text-gray-700 leading-relaxed"></div>
                    </div>
                </div>
            </div>
        </section>


    </main>
    
    <!-- Footer -->
    <footer id="contact" class="bg-gray-800 text-white py-16">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-4">St. Mary's Church</h2>
            <p class="mb-2">Warangal-Hyderabad Rd, Main Rd, beside Vijay Sweet House, Postal Colony, Subedari, Hanamkonda, Telangana 506001</p>
            <p class="mb-4">contact@stfrancischurch.org | (123) 456-7890</p>
            <div class="flex justify-center space-x-4">
                <a href="#" class="hover:text-amber-500">Facebook</a>
                <a href="#" class="hover:text-amber-500">Twitter</a>
                <a href="#" class="https://www.youtube.com/@FRINNAREDDYYERUVA">YouTube</a>
            </div>
             <p class="mt-8 text-gray-400 text-sm">&copy; 2025 St. Mary's Church. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Counter Animation Function
        function animateCounter(element, target) {
            const duration = 2000; // Animation duration in ms
            let start = null;
            const initialValue = 1;

            if (element.dataset.animated) {
                return;
            }
            element.dataset.animated = 'true';

            function step(timestamp) {
                if (!start) start = timestamp;
                const progress = Math.min((timestamp - start) / duration, 1);
                const currentValue = Math.floor(progress * (target - initialValue) + initialValue);
                element.innerText = currentValue;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            }
            window.requestAnimationFrame(step);
        }

        // Animation on scroll
        const animatedCards = document.querySelectorAll('.animated-card');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');

                     // If the visible card contains counters, animate them
                    const counters = entry.target.querySelectorAll('.counter');
                    counters.forEach(counter => {
                        const target = +counter.dataset.target;
                        animateCounter(counter, target);
                    });
                }
            });
        }, {
            threshold: 0.1
        });

        animatedCards.forEach(card => {
            observer.observe(card);
        });

        // --- Gemini API Integration ---

        const API_KEY = ""; // Leave blank, will be handled by the environment
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
        
        // Function to call Gemini API with exponential backoff
        async function callGemini(payload, maxRetries = 3) {
            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0] && result.candidates[0].content && result.candidates[0].content.parts[0]) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error("Invalid response structure from Gemini API");
                    }
                } catch (error) {
                    console.error(`Gemini API call failed on attempt ${attempt + 1}:`, error);
                    attempt++;
                    if (attempt >= maxRetries) {
                        return "Sorry, we couldn't generate a response at this moment. Please try again later.";
                    }
                    const delay = Math.pow(2, attempt) * 1000; // 1s, 2s, 4s
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }


        // Sermon Summarizer Logic
        const summarizeButton = document.getElementById('summarize-button');
        const sermonTextElement = document.getElementById('sermon-text');
        const sermonSummaryContainer = document.getElementById('sermon-summary-container');
        const sermonLoader = document.getElementById('sermon-loader');
        const sermonSummaryContent = document.getElementById('sermon-summary-content');

        summarizeButton.addEventListener('click', async () => {
            sermonSummaryContainer.style.display = 'block';
            sermonLoader.style.display = 'block';
            sermonSummaryContent.innerHTML = '';
            summarizeButton.disabled = true;
            summarizeButton.classList.add('opacity-50', 'cursor-not-allowed');

            const sermonText = sermonTextElement.innerText;
            const prompt = `Please summarize the following sermon in a single, concise paragraph. After the summary, add a heading '### Key Takeaways' and list 3-5 key points from the sermon as a bulleted list (using '*' for each bullet point). Here is the sermon:\n\n${sermonText}`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            const resultText = await callGemini(payload);
            
            // Basic Markdown to HTML conversion
            let htmlResult = resultText
                .replace(/### (.*)/g, '<h4 class="text-xl font-bold mb-2">$1</h4>')
                .replace(/\* (.*)/g, '<li class="ml-5 list-disc">$1</li>');

            sermonLoader.style.display = 'none';
            sermonSummaryContent.innerHTML = htmlResult;
            summarizeButton.disabled = false;
            summarizeButton.classList.remove('opacity-50', 'cursor-not-allowed');
        });


        // Prayer Assistant Logic
        const generatePrayerButton = document.getElementById('generate-prayer-button');
        const prayerTopicInput = document.getElementById('prayer-topic');
        const prayerResultContainer = document.getElementById('prayer-result-container');
        const prayerLoader = document.getElementById('prayer-loader');
        const prayerContent = document.getElementById('prayer-content');

        generatePrayerButton.addEventListener('click', async () => {
            const topic = prayerTopicInput.value.trim();
            if (!topic) {
                prayerContent.innerText = "Please enter a topic for your prayer or reflection.";
                prayerResultContainer.style.display = 'block';
                return;
            }

            prayerResultContainer.style.display = 'block';
            prayerLoader.style.display = 'block';
            prayerContent.innerHTML = '';
            generatePrayerButton.disabled = true;
            generatePrayerButton.classList.add('opacity-50', 'cursor-not-allowed');

            const systemPrompt = "You are a compassionate and gentle spiritual guide for a Christian church website. Your tone should be comforting, hopeful, and encouraging. Do not be preachy. Generate a short, personal prayer or reflection (about 3-5 sentences long) based on the user's feelings or situation.";
            const userQuery = `A person is seeking a prayer because they are feeling or thinking about: "${topic}".`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const resultText = await callGemini(payload);

            prayerLoader.style.display = 'none';
            prayerContent.innerText = resultText;
            generatePrayerButton.disabled = false;
            generatePrayerButton.classList.remove('opacity-50', 'cursor-not-allowed');
        });

    </script>
</body>
</html>

